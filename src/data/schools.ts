// Official full names only - no duplicates
export const popularSchools = [
  // Ivy League
  'Brown University',
  'Columbia University',
  'Cornell University',
  'Dartmouth College',
  'Harvard University',
  'Princeton University',
  'University of Pennsylvania',
  'Yale University',
  
  // Top National Universities
  'Boston College',
  'Boston University',
  'Brandeis University',
  'California Institute of Technology',
  'Carnegie Mellon University',
  'Case Western Reserve University',
  'Duke University',
  'Emory University',
  'Georgetown University',
  'Johns Hopkins University',
  'Massachusetts Institute of Technology',
  'New York University',
  'Northwestern University',
  'Rice University',
  'Stanford University',
  'Tufts University',
  'University of Chicago',
  'University of Notre Dame',
  'University of Rochester',
  'University of Southern California',
  'Vanderbilt University',
  'Wake Forest University',
  'Washington University in St. Louis',
  
  // University of California System
  'University of California, Berkeley',
  'University of California, Davis',
  'University of California, Irvine',
  'University of California, Los Angeles',
  'University of California, Merced',
  'University of California, Riverside',
  'University of California, San Diego',
  'University of California, San Francisco',
  'University of California, Santa Barbara',
  'University of California, Santa Cruz',
  
  // California State University System
  'California Polytechnic State University, San Luis Obispo',
  'California State Polytechnic University, Pomona',
  'California State University, Bakersfield',
  'California State University, Channel Islands',
  'California State University, Chico',
  'California State University, Dominguez Hills',
  'California State University, East Bay',
  'California State University, Fresno',
  'California State University, Fullerton',
  'California State University, Long Beach',
  'California State University, Los Angeles',
  'California State University, Monterey Bay',
  'California State University, Northridge',
  'California State University, Sacramento',
  'California State University, San Bernardino',
  'California State University, San Marcos',
  'California State University, Stanislaus',
  'California Maritime Academy',
  'Humboldt State University',
  'San Diego State University',
  'San Francisco State University',
  'San Jose State University',
  'Sonoma State University',
  
  // Major State Universities
  'Arizona State University',
  'Auburn University',
  'Binghamton University',
  'Clemson University',
  'Florida State University',
  'Georgia Institute of Technology',
  'Indiana University Bloomington',
  'Iowa State University',
  'Louisiana State University',
  'Michigan State University',
  'North Carolina State University',
  'Ohio State University',
  'Pennsylvania State University',
  'Purdue University',
  'Rutgers University',
  'Stony Brook University',
  'Temple University',
  'Texas A&M University',
  'University at Buffalo',
  'University of Alabama',
  'University of Arizona',
  'University of Colorado Boulder',
  'University of Connecticut',
  'University of Delaware',
  'University of Florida',
  'University of Georgia',
  'University of Hawaii at Manoa',
  'University of Illinois at Urbana-Champaign',
  'University of Iowa',
  'University of Kansas',
  'University of Kentucky',
  'University of Maryland, College Park',
  'University of Massachusetts Amherst',
  'University of Michigan',
  'University of Minnesota Twin Cities',
  'University of Mississippi',
  'University of Missouri',
  'University of Nebraska-Lincoln',
  'University of Nevada, Las Vegas',
  'University of Nevada, Reno',
  'University of New Mexico',
  'University of North Carolina at Chapel Hill',
  'University of Oklahoma',
  'University of Oregon',
  'University of Pittsburgh',
  'University of South Carolina',
  'University of Tennessee',
  'University of Texas at Austin',
  'University of Utah',
  'University of Vermont',
  'University of Virginia',
  'University of Washington',
  'University of Wisconsin-Madison',
  'Virginia Tech',
  'West Virginia University',
  
  // Liberal Arts Colleges
  'Amherst College',
  'Barnard College',
  'Bates College',
  'Bowdoin College',
  'Carleton College',
  'Claremont McKenna College',
  'Colby College',
  'Colgate University',
  'Davidson College',
  'Grinnell College',
  'Hamilton College',
  'Harvey Mudd College',
  'Haverford College',
  'Middlebury College',
  'Oberlin College',
  'Occidental College',
  'Pitzer College',
  'Pomona College',
  'Reed College',
  'Scripps College',
  'Smith College',
  'Swarthmore College',
  'Vassar College',
  'Wellesley College',
  'Wesleyan University',
  'Williams College',
  
  // Private Universities
  'American University',
  'Babson College',
  'Baylor University',
  'Bentley University',
  'Brigham Young University',
  'Brown University',
  'Bucknell University',
  'Butler University',
  'Chapman University',
  'Clark University',
  'Colorado College',
  'Creighton University',
  'DePaul University',
  'Drake University',
  'Drexel University',
  'Duquesne University',
  'Elon University',
  'Fairfield University',
  'Fordham University',
  'George Washington University',
  'Gonzaga University',
  'Hofstra University',
  'Howard University',
  'Lafayette College',
  'Lehigh University',
  'Lewis & Clark College',
  'Loyola Marymount University',
  'Loyola University Chicago',
  'Marquette University',
  'Northeastern University',
  'Nova Southeastern University',
  'Pepperdine University',
  'Providence College',
  'Quinnipiac University',
  'Rensselaer Polytechnic Institute',
  'Rhodes College',
  'Rollins College',
  'Saint Joseph\'s University',
  'Saint Louis University',
  'Santa Clara University',
  'Seattle University',
  'Seton Hall University',
  'Southern Methodist University',
  'Stevens Institute of Technology',
  'Syracuse University',
  'Texas Christian University',
  'The College of William & Mary',
  'The George Washington University',
  'The New School',
  'Trinity College',
  'Trinity University',
  'Tulane University',
  'University of Dayton',
  'University of Denver',
  'University of Detroit Mercy',
  'University of Miami',
  'University of Portland',
  'University of Puget Sound',
  'University of Richmond',
  'University of San Diego',
  'University of San Francisco',
  'University of St. Thomas',
  'University of Tampa',
  'University of the Pacific',
  'University of Tulsa',
  'Villanova University',
  'Whitman College',
  'Worcester Polytechnic Institute',
  'Xavier University',
  'Yeshiva University',
  
  // Art & Design Schools
  'Academy of Art University',
  'Art Center College of Design',
  'California College of the Arts',
  'California Institute of the Arts',
  'Maryland Institute College of Art',
  'Otis College of Art and Design',
  'Parsons School of Design',
  'Pratt Institute',
  'Rhode Island School of Design',
  'Savannah College of Art and Design',
  'School of the Art Institute of Chicago',
  'School of Visual Arts',
  
  // Music Conservatories
  'Berklee College of Music',
  'Juilliard School',
  'Manhattan School of Music',
  'New England Conservatory',
  
  // Canadian Universities
  'Carleton University',
  'Concordia University',
  'Dalhousie University',
  'McGill University',
  'McMaster University',
  'Queen\'s University',
  'Ryerson University',
  'Simon Fraser University',
  'University of Alberta',
  'University of British Columbia',
  'University of Calgary',
  'University of Guelph',
  'University of Manitoba',
  'University of Montreal',
  'University of Ottawa',
  'University of Toronto',
  'University of Victoria',
  'University of Waterloo',
  'University of Western Ontario',
  'University of Windsor',
  'York University',
  
  // Other International Universities
  'Cambridge University',
  'ETH Zurich',
  'Imperial College London',
  'London School of Economics',
  'National University of Singapore',
  'Oxford University',
  'Sorbonne University',
  'Trinity College Dublin',
  'University College London',
  'University of Edinburgh',
  'University of Melbourne',
  'University of Sydney',
  
  // Historically Black Colleges and Universities
  'Clark Atlanta University',
  'Florida A&M University',
  'Hampton University',
  'Howard University',
  'Morehouse College',
  'North Carolina A&T State University',
  'Prairie View A&M University',
  'Spelman College',
  'Tuskegee University',
  'Xavier University of Louisiana',
  
  // Service Academies
  'United States Air Force Academy',
  'United States Coast Guard Academy',
  'United States Merchant Marine Academy',
  'United States Military Academy',
  'United States Naval Academy',
  
  // Community Colleges (Major California ones)
  'De Anza College',
  'Diablo Valley College',
  'Foothill College',
  'Orange Coast College',
  'Pasadena City College',
  'Santa Barbara City College',
  'Santa Monica College',
];

// Mapping of common abbreviations/nicknames to official names
// Some abbreviations map to multiple schools (e.g., "uw" -> both Washington and Waterloo)
const schoolAbbreviations: Record<string, string | string[]> = {
  // UC System
  'ucb': 'University of California, Berkeley',
  'uc berkeley': 'University of California, Berkeley',
  'berkeley': 'University of California, Berkeley',
  'cal': 'University of California, Berkeley',
  'ucla': 'University of California, Los Angeles',
  'ucsd': 'University of California, San Diego',
  'uc san diego': 'University of California, San Diego',
  'ucsb': 'University of California, Santa Barbara',
  'uc santa barbara': 'University of California, Santa Barbara',
  'uci': 'University of California, Irvine',
  'uc irvine': 'University of California, Irvine',
  'ucd': 'University of California, Davis',
  'uc davis': 'University of California, Davis',
  'ucsc': 'University of California, Santa Cruz',
  'uc santa cruz': 'University of California, Santa Cruz',
  'ucr': 'University of California, Riverside',
  'uc riverside': 'University of California, Riverside',
  'ucm': 'University of California, Merced',
  'uc merced': 'University of California, Merced',
  'ucsf': 'University of California, San Francisco',
  
  // CSU System
  'sdsu': 'San Diego State University',
  'sjsu': 'San Jose State University',
  'sfsu': 'San Francisco State University',
  'csulb': 'California State University, Long Beach',
  'csun': 'California State University, Northridge',
  'csuf': 'California State University, Fullerton',
  'cal poly': 'California Polytechnic State University, San Luis Obispo',
  'cal poly slo': 'California Polytechnic State University, San Luis Obispo',
  'cal poly pomona': 'California State Polytechnic University, Pomona',
  'fresno state': 'California State University, Fresno',
  'chico state': 'California State University, Chico',
  'sacramento state': 'California State University, Sacramento',
  'sf state': 'San Francisco State University',
  
  // Ivy League
  'harvard': 'Harvard University',
  'yale': 'Yale University',
  'princeton': 'Princeton University',
  'columbia': 'Columbia University',
  'brown': 'Brown University',
  'cornell': 'Cornell University',
  'dartmouth': 'Dartmouth College',
  'penn': 'University of Pennsylvania',
  'upenn': 'University of Pennsylvania',
  
  // Top Universities
  'stanford': 'Stanford University',
  'mit': 'Massachusetts Institute of Technology',
  'caltech': 'California Institute of Technology',
  'cal tech': 'California Institute of Technology',
  'uchicago': 'University of Chicago',
  'u of c': 'University of Chicago',
  'duke': 'Duke University',
  'northwestern': 'Northwestern University',
  'nu': 'Northwestern University',
  'jhu': 'Johns Hopkins University',
  'johns hopkins': 'Johns Hopkins University',
  'cmu': 'Carnegie Mellon University',
  'carnegie mellon': 'Carnegie Mellon University',
  'nyu': 'New York University',
  'usc': 'University of Southern California',
  'georgetown': 'Georgetown University',
  'vanderbilt': 'Vanderbilt University',
  'vandy': 'Vanderbilt University',
  'rice': 'Rice University',
  'washu': 'Washington University in St. Louis',
  'wustl': 'Washington University in St. Louis',
  'notre dame': 'University of Notre Dame',
  'nd': 'University of Notre Dame',
  'emory': 'Emory University',
  'tufts': 'Tufts University',
  'bc': 'Boston College',
  'bu': 'Boston University',
  'wake': 'Wake Forest University',
  'wake forest': 'Wake Forest University',
  
  // State Universities
  'umich': 'University of Michigan',
  'michigan': 'University of Michigan',
  'u of m': 'University of Michigan',
  'uva': 'University of Virginia',
  'unc': 'University of North Carolina at Chapel Hill',
  'unc chapel hill': 'University of North Carolina at Chapel Hill',
  'ut': 'University of Texas at Austin',
  'ut austin': 'University of Texas at Austin',
  'texas': 'University of Texas at Austin',
  'uf': 'University of Florida',
  'florida': 'University of Florida',
  'uga': 'University of Georgia',
  'georgia': 'University of Georgia',
  'uiuc': 'University of Illinois at Urbana-Champaign',
  'illinois': 'University of Illinois at Urbana-Champaign',
  'uw': ['University of Washington', 'University of Waterloo'], // Both Washington and Waterloo
  'udub': 'University of Washington',
  'washington': 'University of Washington',
  'wisconsin': 'University of Wisconsin-Madison',
  'uw madison': 'University of Wisconsin-Madison',
  'osu': 'Ohio State University',
  'ohio state': 'Ohio State University',
  'psu': 'Pennsylvania State University',
  'penn state': 'Pennsylvania State University',
  'umd': 'University of Maryland, College Park',
  'maryland': 'University of Maryland, College Park',
  'umn': 'University of Minnesota Twin Cities',
  'minnesota': 'University of Minnesota Twin Cities',
  'iu': 'Indiana University Bloomington',
  'indiana': 'Indiana University Bloomington',
  'purdue': 'Purdue University',
  'msu': 'Michigan State University',
  'michigan state': 'Michigan State University',
  'cu': 'University of Colorado Boulder',
  'cu boulder': 'University of Colorado Boulder',
  'colorado': 'University of Colorado Boulder',
  'arizona': 'University of Arizona',
  'u of a': ['University of Arizona', 'University of Alberta'], // Both Arizona and Alberta
  'asu': 'Arizona State University',
  'arizona state': 'Arizona State University',
  'oregon': 'University of Oregon',
  'uo': 'University of Oregon',
  'utah': 'University of Utah',
  'u of u': 'University of Utah',
  
  // California Private Schools
  'scu': 'Santa Clara University',
  'santa clara': 'Santa Clara University',
  'usf': 'University of San Francisco',
  'usd': 'University of San Diego',
  'lmu': 'Loyola Marymount University',
  'loyola marymount': 'Loyola Marymount University',
  'pepperdine': 'Pepperdine University',
  'chapman': 'Chapman University',
  'uop': 'University of the Pacific',
  'pacific': 'University of the Pacific',
  
  // Liberal Arts
  'pomona': 'Pomona College',
  'cmc': 'Claremont McKenna College',
  'claremont mckenna': 'Claremont McKenna College',
  'harvey mudd': 'Harvey Mudd College',
  'mudd': 'Harvey Mudd College',
  'scripps': 'Scripps College',
  'pitzer': 'Pitzer College',
  'oxy': 'Occidental College',
  'occidental': 'Occidental College',
  'williams': 'Williams College',
  'amherst': 'Amherst College',
  'swarthmore': 'Swarthmore College',
  'swat': 'Swarthmore College',
  'wellesley': 'Wellesley College',
  'bowdoin': 'Bowdoin College',
  'middlebury': 'Middlebury College',
  'midd': 'Middlebury College',
  'carleton': 'Carleton College',
  
  // Tech Schools
  'gatech': 'Georgia Institute of Technology',
  'georgia tech': 'Georgia Institute of Technology',
  'gt': 'Georgia Institute of Technology',
  'vtech': 'Virginia Tech',
  'virginia tech': 'Virginia Tech',
  'vt': 'Virginia Tech',
  'rpi': 'Rensselaer Polytechnic Institute',
  'wpi': 'Worcester Polytechnic Institute',
  'stevens': 'Stevens Institute of Technology',
  
  // Art Schools
  'risd': 'Rhode Island School of Design',
  'parsons': 'Parsons School of Design',
  'pratt': 'Pratt Institute',
  'saic': 'School of the Art Institute of Chicago',
  'calarts': 'California Institute of the Arts',
  'cca': 'California College of the Arts',
  'scad': 'Savannah College of Art and Design',
  'sva': 'School of Visual Arts',
  'mica': 'Maryland Institute College of Art',
  
  // Canadian Universities
  'uoft': 'University of Toronto',
  'u of t': 'University of Toronto',
  'toronto': 'University of Toronto',
  'waterloo': 'University of Waterloo',
  // 'uw' is already mapped to both Washington and Waterloo above
  'uwaterloo': 'University of Waterloo',
  'ubc': 'University of British Columbia',
  'mcgill': 'McGill University',
  'queens': 'Queen\'s University',
  'queen\'s': 'Queen\'s University',
  'western': 'University of Western Ontario',
  'uwo': 'University of Western Ontario',
  'mcmaster': 'McMaster University',
  'mac': 'McMaster University',
  'york': 'York University',
  'yorku': 'York University',
  'ryerson': 'Ryerson University',
  'tmu': 'Ryerson University', // Toronto Metropolitan University (new name)
  'ottawa': 'University of Ottawa',
  'uottawa': 'University of Ottawa',
  'u of o': 'University of Ottawa',
  'calgary': 'University of Calgary',
  'u of c calgary': 'University of Calgary',
  'alberta': 'University of Alberta',
  // 'u of a' is already mapped to both Arizona and Alberta above
  'ualberta': 'University of Alberta',
  'sfu': 'Simon Fraser University',
  'simon fraser': 'Simon Fraser University',
  'uvic': 'University of Victoria',
  'victoria': 'University of Victoria',
  'concordia': 'Concordia University',
  'carleton u': 'Carleton University',
  'guelph': 'University of Guelph',
  'u of g': 'University of Guelph',
  'manitoba': 'University of Manitoba',
  'u of manitoba': 'University of Manitoba',
  'dalhousie': 'Dalhousie University',
  'dal': 'Dalhousie University',
  'windsor': 'University of Windsor',
  'uwindsor': 'University of Windsor',
  'montreal': 'University of Montreal',
  'udem': 'University of Montreal',
  'u de m': 'University of Montreal',
  
  // Other Common Abbreviations
  'gwu': 'George Washington University',
  'gw': 'George Washington University',
  'smu': 'Southern Methodist University',
  'tcu': 'Texas Christian University',
  'byu': 'Brigham Young University',
  'neu': 'Northeastern University',
  'northeastern': 'Northeastern University',
  'slu': 'Saint Louis University',
  'depaul': 'DePaul University',
  'loyola chicago': 'Loyola University Chicago',
};

// Enhanced search function
export const searchSchools = (query: string, limit = 10): string[] => {
  if (!query || query.length < 2) return [];
  
  const lowerQuery = query.toLowerCase().trim();
  
  // Check if the query matches an abbreviation
  const fullNameFromAbbr = schoolAbbreviations[lowerQuery];
  let abbreviationExactMatches: string[] = [];
  
  if (fullNameFromAbbr) {
    // Handle both single string and array of strings
    if (Array.isArray(fullNameFromAbbr)) {
      abbreviationExactMatches = fullNameFromAbbr;
    } else {
      abbreviationExactMatches = [fullNameFromAbbr];
    }
  }
  
  // Check for partial abbreviation matches
  const abbreviationPartialMatches: string[] = [];
  Object.entries(schoolAbbreviations).forEach(([abbr, schools]) => {
    if (abbr.startsWith(lowerQuery) && abbr !== lowerQuery) {
      if (Array.isArray(schools)) {
        abbreviationPartialMatches.push(...schools);
      } else {
        abbreviationPartialMatches.push(schools);
      }
    }
  });
  
  // Remove duplicates from abbreviation matches
  const uniqueAbbreviationMatches = [...new Set([...abbreviationExactMatches, ...abbreviationPartialMatches])];
  
  // Search in the main schools list
  const exactMatches = popularSchools.filter(school =>
    school.toLowerCase().startsWith(lowerQuery)
  );
  
  // For partial matches, only match at word boundaries (start of words)
  const partialMatches = popularSchools.filter(school => {
    const schoolLower = school.toLowerCase();
    // Skip if it's already an exact match
    if (schoolLower.startsWith(lowerQuery)) return false;
    
    // Check if query matches the start of any word in the school name
    const words = schoolLower.split(/[\s,-]+/); // Split on spaces, commas, and hyphens
    return words.some(word => word.startsWith(lowerQuery));
  });
  
  // Combine results, prioritizing exact abbreviation matches, then partial abbreviation matches, then exact matches, then partial
  const allMatches = [
    ...abbreviationExactMatches,
    ...abbreviationPartialMatches.filter(s => !abbreviationExactMatches.includes(s)),
    ...exactMatches.filter(s => !uniqueAbbreviationMatches.includes(s)),
    ...partialMatches.filter(s => !uniqueAbbreviationMatches.includes(s) && !exactMatches.includes(s))
  ];
  
  // Remove duplicates and limit results
  const uniqueMatches = [...new Set(allMatches)];
  return uniqueMatches.slice(0, limit);
};

// Get popular schools by region (for potential future use)
export const getPopularSchoolsByRegion = (region: string): string[] => {
  const regions: Record<string, string[]> = {
    'Northeast': [
      'Harvard University',
      'Yale University',
      'Princeton University',
      'Columbia University',
      'Massachusetts Institute of Technology',
      'Brown University',
      'Cornell University',
      'Dartmouth College',
      'University of Pennsylvania',
      'New York University',
      'Boston University',
      'Northeastern University',
    ],
    'West Coast': [
      'Stanford University',
      'University of California, Berkeley',
      'University of California, Los Angeles',
      'University of Southern California',
      'University of California, San Diego',
      'California Institute of Technology',
      'University of California, Davis',
      'University of California, Irvine',
      'University of Washington',
      'University of Oregon',
    ],
    'Midwest': [
      'University of Chicago',
      'Northwestern University',
      'University of Michigan',
      'University of Illinois at Urbana-Champaign',
      'University of Wisconsin-Madison',
      'University of Notre Dame',
      'Washington University in St. Louis',
      'Ohio State University',
    ],
    'South': [
      'Duke University',
      'Vanderbilt University',
      'Rice University',
      'Emory University',
      'University of Texas at Austin',
      'University of Florida',
      'University of North Carolina at Chapel Hill',
      'Georgia Institute of Technology',
    ],
  };
  
  return regions[region] || [];
};